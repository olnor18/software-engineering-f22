package xtext.factoryLang.generator.subgenerators;

import com.google.common.base.Objects;
import java.util.Arrays;
import org.eclipse.emf.common.util.EList;
import org.eclipse.emf.ecore.EObject;
import org.eclipse.xtend2.lib.StringConcatenation;
import xtext.factoryLang.factoryLang.COLOR;
import xtext.factoryLang.factoryLang.CameraScanOperation;
import xtext.factoryLang.factoryLang.ColorValue;
import xtext.factoryLang.factoryLang.CraneDropOperation;
import xtext.factoryLang.factoryLang.CraneParameter;
import xtext.factoryLang.factoryLang.CranePickupOperation;
import xtext.factoryLang.factoryLang.CranePositionParameter;
import xtext.factoryLang.factoryLang.DISK_SLOT_STATES;
import xtext.factoryLang.factoryLang.DISK_STATES;
import xtext.factoryLang.factoryLang.DeviceConditional;
import xtext.factoryLang.factoryLang.DiskMarkSlotOperation;
import xtext.factoryLang.factoryLang.DiskMoveEmptySlotOperation;
import xtext.factoryLang.factoryLang.DiskMoveSlotOperation;
import xtext.factoryLang.factoryLang.DiskMoveVariableSlotOperation;
import xtext.factoryLang.factoryLang.DiskSlotStateValue;
import xtext.factoryLang.factoryLang.DiskStateValue;
import xtext.factoryLang.factoryLang.DiskWaitOperation;
import xtext.factoryLang.factoryLang.ForEach;
import xtext.factoryLang.factoryLang.Model;
import xtext.factoryLang.factoryLang.Statement;
import xtext.factoryLang.factoryLang.TIME;
import xtext.factoryLang.factoryLang.VariableConditional;
import xtext.factoryLang.uppaalParsers.EnumParser;

@SuppressWarnings("all")
public class UppaalMasterGenerator {
  private static String lastTransistionState = "id0";
  
  private static String currentDisc = "ERROR_NO_DISC";
  
  protected static String _generateLocation(final DeviceConditional statement) {
    String _xblockexpression = null;
    {
      String value = "";
      EObject _value = statement.getDeviceValue().getValue();
      boolean _matched = false;
      if (_value instanceof DiskStateValue) {
        _matched=true;
        EObject _value_1 = statement.getDeviceValue().getValue();
        value = ((DiskStateValue) _value_1).getValue().toString();
        if (((statement.getNot_operator() != null) && (value == DISK_STATES.EMPTY.toString()))) {
          value = DISK_STATES.FULL.toString();
        } else {
          if (((statement.getNot_operator() != null) && (value == DISK_STATES.FULL.toString()))) {
            value = DISK_STATES.EMPTY.toString();
          }
        }
      }
      if (!_matched) {
        if (_value instanceof ColorValue) {
          _matched=true;
          EObject _value_1 = statement.getDeviceValue().getValue();
          value = ((DiskStateValue) _value_1).getValue().toString();
        }
      }
      StringConcatenation _builder = new StringConcatenation();
      _builder.append("<location id=\"");
      StringConcatenation _builder_1 = new StringConcatenation();
      String _name = statement.getDevice().getName();
      _builder_1.append(_name);
      _builder_1.append("_get");
      _builder_1.append(value);
      _builder_1.append("_");
      int _indexOf = UppaalGenerator.statementsIndexer.indexOf(statement);
      _builder_1.append(_indexOf);
      String _idOfLocation = UppaalGenerator.getIdOfLocation(_builder_1.toString());
      _builder.append(_idOfLocation);
      _builder.append("\">");
      _builder.newLineIfNotEmpty();
      _builder.append("\t");
      _builder.append("<name>");
      String _name_1 = statement.getDevice().getName();
      _builder.append(_name_1, "\t");
      _builder.append("_get");
      _builder.append(value, "\t");
      _builder.append("_");
      int _indexOf_1 = UppaalGenerator.statementsIndexer.indexOf(statement);
      _builder.append(_indexOf_1, "\t");
      _builder.append("</name>");
      _builder.newLineIfNotEmpty();
      _builder.append("\t");
      _builder.append("<label kind=\"invariant\">GlobalTimer &lt; 10</label>");
      _builder.newLine();
      _builder.append("</location>");
      _builder.newLine();
      _builder.append("<location id=\"");
      StringConcatenation _builder_2 = new StringConcatenation();
      String _name_2 = statement.getDevice().getName();
      _builder_2.append(_name_2);
      _builder_2.append("_Is");
      _builder_2.append(value);
      _builder_2.append("_");
      int _indexOf_2 = UppaalGenerator.statementsIndexer.indexOf(statement);
      _builder_2.append(_indexOf_2);
      String _idOfLocation_1 = UppaalGenerator.getIdOfLocation(_builder_2.toString());
      _builder.append(_idOfLocation_1);
      _builder.append("\">");
      _builder.newLineIfNotEmpty();
      _builder.append("\t");
      _builder.append("<name>");
      String _name_3 = statement.getDevice().getName();
      _builder.append(_name_3, "\t");
      _builder.append("_Is");
      _builder.append(value, "\t");
      _builder.append("_");
      int _indexOf_3 = UppaalGenerator.statementsIndexer.indexOf(statement);
      _builder.append(_indexOf_3, "\t");
      _builder.append("</name>");
      _builder.newLineIfNotEmpty();
      _builder.append("</location>");
      _builder.newLine();
      _builder.append("<location id=\"");
      StringConcatenation _builder_3 = new StringConcatenation();
      String _name_4 = statement.getDevice().getName();
      _builder_3.append(_name_4);
      _builder_3.append("_EndIf");
      _builder_3.append(value);
      _builder_3.append("_");
      int _indexOf_4 = UppaalGenerator.statementsIndexer.indexOf(statement);
      _builder_3.append(_indexOf_4);
      String _idOfLocation_2 = UppaalGenerator.getIdOfLocation(_builder_3.toString());
      _builder.append(_idOfLocation_2);
      _builder.append("\">");
      _builder.newLineIfNotEmpty();
      _builder.append("\t");
      _builder.append("<name>");
      String _name_5 = statement.getDevice().getName();
      _builder.append(_name_5, "\t");
      _builder.append("_EndIf");
      _builder.append(value, "\t");
      _builder.append("_");
      int _indexOf_5 = UppaalGenerator.statementsIndexer.indexOf(statement);
      _builder.append(_indexOf_5, "\t");
      _builder.append("</name>");
      _builder.newLineIfNotEmpty();
      _builder.append("</location>");
      _builder.newLine();
      {
        EList<Statement> _statements = statement.getStatements();
        for(final Statement s : _statements) {
          String _generateLocation = UppaalMasterGenerator.generateLocation(s);
          _builder.append(_generateLocation);
          _builder.newLineIfNotEmpty();
        }
      }
      _xblockexpression = _builder.toString();
    }
    return _xblockexpression;
  }
  
  protected static String _generateLocation(final DiskWaitOperation statement) {
    return null;
  }
  
  protected static String _generateTransistion(final DiskWaitOperation statement) {
    return null;
  }
  
  protected static String _generateTransistion(final DeviceConditional statement) {
    String value = "";
    EObject _value = statement.getDeviceValue().getValue();
    boolean _matched = false;
    if (_value instanceof DiskStateValue) {
      _matched=true;
      EObject _value_1 = statement.getDeviceValue().getValue();
      value = ((DiskStateValue) _value_1).getValue().toString();
      if (((statement.getNot_operator() != null) && (value == DISK_STATES.EMPTY.toString()))) {
        value = DISK_STATES.FULL.toString();
      } else {
        if (((statement.getNot_operator() != null) && (value == DISK_STATES.FULL.toString()))) {
          value = DISK_STATES.EMPTY.toString();
        }
      }
    }
    if (!_matched) {
      if (_value instanceof ColorValue) {
        _matched=true;
        EObject _value_1 = statement.getDeviceValue().getValue();
        value = ((DiskStateValue) _value_1).getValue().toString();
      }
    }
    UppaalMasterGenerator.currentDisc = statement.getDevice().getName();
    String returnTransistion = "";
    EObject _eContainer = statement.eContainer();
    if ((_eContainer instanceof Model)) {
      returnTransistion = UppaalMasterGenerator.lastTransistionState;
    } else {
      StringConcatenation _builder = new StringConcatenation();
      String _name = statement.getDevice().getName();
      _builder.append(_name);
      _builder.append("_EndIf");
      _builder.append(value);
      _builder.append("_");
      int _indexOf = UppaalGenerator.statementsIndexer.indexOf(statement);
      _builder.append(_indexOf);
      returnTransistion = UppaalGenerator.getIdOfLocation(_builder.toString());
    }
    EObject _value_1 = statement.getDeviceValue().getValue();
    boolean _matched_1 = false;
    if (_value_1 instanceof DiskStateValue) {
      _matched_1=true;
      StringConcatenation _builder_1 = new StringConcatenation();
      _builder_1.append("<transition>");
      _builder_1.newLine();
      _builder_1.append("\t");
      _builder_1.append("<source ref=\"");
      _builder_1.append(UppaalMasterGenerator.lastTransistionState, "\t");
      _builder_1.append("\"/>");
      _builder_1.newLineIfNotEmpty();
      _builder_1.append("\t");
      _builder_1.append("<target ref=\"");
      StringConcatenation _builder_2 = new StringConcatenation();
      String _name_1 = statement.getDevice().getName();
      _builder_2.append(_name_1);
      _builder_2.append("_get");
      _builder_2.append(value);
      _builder_2.append("_");
      int _indexOf_1 = UppaalGenerator.statementsIndexer.indexOf(statement);
      _builder_2.append(_indexOf_1);
      String _idOfLocation = UppaalGenerator.getIdOfLocation(_builder_2.toString());
      _builder_1.append(_idOfLocation, "\t");
      _builder_1.append("\"/>");
      _builder_1.newLineIfNotEmpty();
      _builder_1.append("\t");
      _builder_1.append("<label kind=\"synchronisation\">");
      _builder_1.append(UppaalMasterGenerator.currentDisc, "\t");
      _builder_1.append("_get");
      _builder_1.append(value, "\t");
      _builder_1.append("Slot!</label>");
      _builder_1.newLineIfNotEmpty();
      _builder_1.append("\t");
      _builder_1.append("<label kind=\"assignment\">GlobalTimer = 0</label>");
      _builder_1.newLine();
      _builder_1.append("</transition>");
      _builder_1.newLine();
      _builder_1.append("<transition>");
      _builder_1.newLine();
      _builder_1.append("\t");
      _builder_1.append("<source ref=\"");
      StringConcatenation _builder_3 = new StringConcatenation();
      String _name_2 = statement.getDevice().getName();
      _builder_3.append(_name_2);
      _builder_3.append("_get");
      _builder_3.append(value);
      _builder_3.append("_");
      int _indexOf_2 = UppaalGenerator.statementsIndexer.indexOf(statement);
      _builder_3.append(_indexOf_2);
      String _idOfLocation_1 = UppaalGenerator.getIdOfLocation(_builder_3.toString());
      _builder_1.append(_idOfLocation_1, "\t");
      _builder_1.append("\"/>");
      _builder_1.newLineIfNotEmpty();
      _builder_1.append("\t");
      _builder_1.append("<target ref=\"");
      StringConcatenation _builder_4 = new StringConcatenation();
      String _name_3 = statement.getDevice().getName();
      _builder_4.append(_name_3);
      _builder_4.append("_Is");
      _builder_4.append(value);
      _builder_4.append("_");
      int _indexOf_3 = UppaalGenerator.statementsIndexer.indexOf(statement);
      _builder_4.append(_indexOf_3);
      String _idOfLocation_2 = UppaalGenerator.getIdOfLocation(_builder_4.toString());
      _builder_1.append(_idOfLocation_2, "\t");
      _builder_1.append("\"/>");
      _builder_1.newLineIfNotEmpty();
      _builder_1.append("\t");
      _builder_1.append("<label kind=\"synchronisation\">");
      _builder_1.append(UppaalMasterGenerator.currentDisc, "\t");
      _builder_1.append("_found");
      _builder_1.append(value, "\t");
      _builder_1.append("Slot?</label>");
      _builder_1.newLineIfNotEmpty();
      _builder_1.append("</transition>");
      _builder_1.newLine();
      StringConcatenation _builder_5 = new StringConcatenation();
      StringConcatenation _builder_6 = new StringConcatenation();
      String _name_4 = statement.getDevice().getName();
      _builder_6.append(_name_4);
      _builder_6.append("_Is");
      _builder_6.append(value);
      _builder_6.append("_");
      int _indexOf_4 = UppaalGenerator.statementsIndexer.indexOf(statement);
      _builder_6.append(_indexOf_4);
      String _idOfLocation_3 = UppaalGenerator.getIdOfLocation(_builder_6.toString());
      _builder_5.append(_idOfLocation_3);
      String _updateLastTrans = UppaalMasterGenerator.updateLastTrans(_builder_5.toString());
      _builder_1.append(_updateLastTrans);
      _builder_1.newLineIfNotEmpty();
      {
        EList<Statement> _statements = statement.getStatements();
        for(final Statement s : _statements) {
          String _generateTransistion = UppaalMasterGenerator.generateTransistion(s);
          _builder_1.append(_generateTransistion);
          _builder_1.newLineIfNotEmpty();
        }
      }
      _builder_1.append("<transition>");
      _builder_1.newLine();
      _builder_1.append("\t");
      _builder_1.append("<source ref=\"");
      _builder_1.append(UppaalMasterGenerator.lastTransistionState, "\t");
      _builder_1.append("\"/>");
      _builder_1.newLineIfNotEmpty();
      _builder_1.append("\t");
      _builder_1.append("<target ref=\"");
      _builder_1.append(returnTransistion, "\t");
      _builder_1.append("\"/>");
      _builder_1.newLineIfNotEmpty();
      _builder_1.append("</transition>");
      _builder_1.newLine();
      _builder_1.append("<transition>");
      _builder_1.newLine();
      _builder_1.append("\t");
      _builder_1.append("<source ref=\"");
      StringConcatenation _builder_7 = new StringConcatenation();
      String _name_5 = statement.getDevice().getName();
      _builder_7.append(_name_5);
      _builder_7.append("_get");
      _builder_7.append(value);
      _builder_7.append("_");
      int _indexOf_5 = UppaalGenerator.statementsIndexer.indexOf(statement);
      _builder_7.append(_indexOf_5);
      String _idOfLocation_4 = UppaalGenerator.getIdOfLocation(_builder_7.toString());
      _builder_1.append(_idOfLocation_4, "\t");
      _builder_1.append("\"/>");
      _builder_1.newLineIfNotEmpty();
      _builder_1.append("\t");
      _builder_1.append("<target ref=\"");
      _builder_1.append(returnTransistion, "\t");
      _builder_1.append("\"/>");
      _builder_1.newLineIfNotEmpty();
      _builder_1.append("\t");
      _builder_1.append("<label kind=\"guard\">GlobalTimer &gt; 2</label>");
      _builder_1.newLine();
      _builder_1.append("</transition>");
      _builder_1.newLine();
      final String trans = _builder_1.toString();
      UppaalMasterGenerator.lastTransistionState = returnTransistion;
      return trans;
    }
    throw new UnsupportedOperationException("This conditional value is not implemented yet");
  }
  
  protected static String _generateLocation(final VariableConditional statement) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("<location id=\"");
    StringConcatenation _builder_1 = new StringConcatenation();
    String _name = statement.getVariable().getName();
    _builder_1.append(_name);
    _builder_1.append("_get");
    EObject _value = statement.getVariableValue().getValue();
    COLOR _value_1 = ((ColorValue) _value).getValue();
    _builder_1.append(_value_1);
    _builder_1.append("_");
    int _indexOf = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_1.append(_indexOf);
    String _idOfLocation = UppaalGenerator.getIdOfLocation(_builder_1.toString());
    _builder.append(_idOfLocation);
    _builder.append("\">");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<name>");
    String _name_1 = statement.getVariable().getName();
    _builder.append(_name_1, "\t");
    _builder.append("_get");
    EObject _value_2 = statement.getVariableValue().getValue();
    COLOR _value_3 = ((ColorValue) _value_2).getValue();
    _builder.append(_value_3, "\t");
    _builder.append("_");
    int _indexOf_1 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder.append(_indexOf_1, "\t");
    _builder.append("</name>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<label kind=\"invariant\">GlobalTimer &lt; 10</label>");
    _builder.newLine();
    _builder.append("</location>");
    _builder.newLine();
    _builder.append("<location id=\"");
    StringConcatenation _builder_2 = new StringConcatenation();
    String _name_2 = statement.getVariable().getName();
    _builder_2.append(_name_2);
    _builder_2.append("_Is");
    EObject _value_4 = statement.getVariableValue().getValue();
    COLOR _value_5 = ((ColorValue) _value_4).getValue();
    _builder_2.append(_value_5);
    _builder_2.append("_");
    int _indexOf_2 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_2.append(_indexOf_2);
    String _idOfLocation_1 = UppaalGenerator.getIdOfLocation(_builder_2.toString());
    _builder.append(_idOfLocation_1);
    _builder.append("\">");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<name>");
    String _name_3 = statement.getVariable().getName();
    _builder.append(_name_3, "\t");
    _builder.append("_Is");
    EObject _value_6 = statement.getVariableValue().getValue();
    COLOR _value_7 = ((ColorValue) _value_6).getValue();
    _builder.append(_value_7, "\t");
    _builder.append("_");
    int _indexOf_3 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder.append(_indexOf_3, "\t");
    _builder.append("</name>");
    _builder.newLineIfNotEmpty();
    _builder.append("</location>");
    _builder.newLine();
    _builder.append("<location id=\"");
    StringConcatenation _builder_3 = new StringConcatenation();
    String _name_4 = statement.getVariable().getName();
    _builder_3.append(_name_4);
    _builder_3.append("_EndIf");
    EObject _value_8 = statement.getVariableValue().getValue();
    COLOR _value_9 = ((ColorValue) _value_8).getValue();
    _builder_3.append(_value_9);
    _builder_3.append("_");
    int _indexOf_4 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_3.append(_indexOf_4);
    String _idOfLocation_2 = UppaalGenerator.getIdOfLocation(_builder_3.toString());
    _builder.append(_idOfLocation_2);
    _builder.append("\">");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<name>");
    String _name_5 = statement.getVariable().getName();
    _builder.append(_name_5, "\t");
    _builder.append("_EndIf");
    EObject _value_10 = statement.getVariableValue().getValue();
    COLOR _value_11 = ((ColorValue) _value_10).getValue();
    _builder.append(_value_11, "\t");
    _builder.append("_");
    int _indexOf_5 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder.append(_indexOf_5, "\t");
    _builder.append("</name>");
    _builder.newLineIfNotEmpty();
    _builder.append("</location>");
    _builder.newLine();
    {
      EList<Statement> _statements = statement.getStatements();
      for(final Statement s : _statements) {
        String _generateLocation = UppaalMasterGenerator.generateLocation(s);
        _builder.append(_generateLocation);
        _builder.newLineIfNotEmpty();
      }
    }
    return _builder.toString();
  }
  
  protected static String _generateTransistion(final VariableConditional statement) {
    StringConcatenation _builder = new StringConcatenation();
    String _name = statement.getVariable().getName();
    _builder.append(_name);
    _builder.append("_EndIf");
    EObject _value = statement.getVariableValue().getValue();
    COLOR _value_1 = ((ColorValue) _value).getValue();
    _builder.append(_value_1);
    _builder.append("_");
    int _indexOf = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder.append(_indexOf);
    final String returnTransistion = UppaalGenerator.getIdOfLocation(_builder.toString());
    EObject _value_2 = statement.getVariableValue().getValue();
    boolean _matched = false;
    if (_value_2 instanceof ColorValue) {
      _matched=true;
      StringConcatenation _builder_1 = new StringConcatenation();
      _builder_1.append("<transition>");
      _builder_1.newLine();
      _builder_1.append("\t");
      _builder_1.append("<source ref=\"");
      _builder_1.append(UppaalMasterGenerator.lastTransistionState, "\t");
      _builder_1.append("\"/>");
      _builder_1.newLineIfNotEmpty();
      _builder_1.append("\t");
      _builder_1.append("<target ref=\"");
      StringConcatenation _builder_2 = new StringConcatenation();
      String _name_1 = statement.getVariable().getName();
      _builder_2.append(_name_1);
      _builder_2.append("_get");
      EObject _value_3 = statement.getVariableValue().getValue();
      COLOR _value_4 = ((ColorValue) _value_3).getValue();
      _builder_2.append(_value_4);
      _builder_2.append("_");
      int _indexOf_1 = UppaalGenerator.statementsIndexer.indexOf(statement);
      _builder_2.append(_indexOf_1);
      String _idOfLocation = UppaalGenerator.getIdOfLocation(_builder_2.toString());
      _builder_1.append(_idOfLocation, "\t");
      _builder_1.append("\"/>");
      _builder_1.newLineIfNotEmpty();
      _builder_1.append("\t");
      _builder_1.append("<label kind=\"synchronisation\">");
      _builder_1.append(UppaalMasterGenerator.currentDisc, "\t");
      _builder_1.append("_getColourSlot[currentSlot]!</label>");
      _builder_1.newLineIfNotEmpty();
      _builder_1.append("\t");
      _builder_1.append("<label kind=\"assignment\">GlobalTimer = 0</label>");
      _builder_1.newLine();
      _builder_1.append("</transition>");
      _builder_1.newLine();
      _builder_1.append("<transition>");
      _builder_1.newLine();
      _builder_1.append("\t");
      _builder_1.append("<source ref=\"");
      StringConcatenation _builder_3 = new StringConcatenation();
      String _name_2 = statement.getVariable().getName();
      _builder_3.append(_name_2);
      _builder_3.append("_get");
      EObject _value_5 = statement.getVariableValue().getValue();
      COLOR _value_6 = ((ColorValue) _value_5).getValue();
      _builder_3.append(_value_6);
      _builder_3.append("_");
      int _indexOf_2 = UppaalGenerator.statementsIndexer.indexOf(statement);
      _builder_3.append(_indexOf_2);
      String _idOfLocation_1 = UppaalGenerator.getIdOfLocation(_builder_3.toString());
      _builder_1.append(_idOfLocation_1, "\t");
      _builder_1.append("\"/>");
      _builder_1.newLineIfNotEmpty();
      _builder_1.append("\t");
      _builder_1.append("<target ref=\"");
      StringConcatenation _builder_4 = new StringConcatenation();
      String _name_3 = statement.getVariable().getName();
      _builder_4.append(_name_3);
      _builder_4.append("_Is");
      EObject _value_7 = statement.getVariableValue().getValue();
      COLOR _value_8 = ((ColorValue) _value_7).getValue();
      _builder_4.append(_value_8);
      _builder_4.append("_");
      int _indexOf_3 = UppaalGenerator.statementsIndexer.indexOf(statement);
      _builder_4.append(_indexOf_3);
      String _idOfLocation_2 = UppaalGenerator.getIdOfLocation(_builder_4.toString());
      _builder_1.append(_idOfLocation_2, "\t");
      _builder_1.append("\"/>");
      _builder_1.newLineIfNotEmpty();
      _builder_1.append("\t");
      _builder_1.append("<label kind=\"guard\">currentSlot_colour == ");
      EObject _value_9 = statement.getVariableValue().getValue();
      int _ColourToInt = EnumParser.ColourToInt(((ColorValue) _value_9).getValue());
      _builder_1.append(_ColourToInt, "\t");
      _builder_1.append("</label>");
      _builder_1.newLineIfNotEmpty();
      _builder_1.append("\t");
      _builder_1.append("<label kind=\"synchronisation\">");
      _builder_1.append(UppaalMasterGenerator.currentDisc, "\t");
      _builder_1.append("_gottenColourSlot?</label>");
      _builder_1.newLineIfNotEmpty();
      _builder_1.append("</transition>");
      _builder_1.newLine();
      StringConcatenation _builder_5 = new StringConcatenation();
      StringConcatenation _builder_6 = new StringConcatenation();
      String _name_4 = statement.getVariable().getName();
      _builder_6.append(_name_4);
      _builder_6.append("_Is");
      EObject _value_10 = statement.getVariableValue().getValue();
      COLOR _value_11 = ((ColorValue) _value_10).getValue();
      _builder_6.append(_value_11);
      _builder_6.append("_");
      int _indexOf_4 = UppaalGenerator.statementsIndexer.indexOf(statement);
      _builder_6.append(_indexOf_4);
      String _idOfLocation_3 = UppaalGenerator.getIdOfLocation(_builder_6.toString());
      _builder_5.append(_idOfLocation_3);
      String _updateLastTrans = UppaalMasterGenerator.updateLastTrans(_builder_5.toString());
      _builder_1.append(_updateLastTrans);
      _builder_1.newLineIfNotEmpty();
      {
        EList<Statement> _statements = statement.getStatements();
        for(final Statement s : _statements) {
          String _generateTransistion = UppaalMasterGenerator.generateTransistion(s);
          _builder_1.append(_generateTransistion);
          _builder_1.newLineIfNotEmpty();
        }
      }
      _builder_1.append("<transition>");
      _builder_1.newLine();
      _builder_1.append("\t");
      _builder_1.append("<source ref=\"");
      _builder_1.append(UppaalMasterGenerator.lastTransistionState, "\t");
      _builder_1.append("\"/>");
      _builder_1.newLineIfNotEmpty();
      _builder_1.append("\t");
      _builder_1.append("<target ref=\"");
      _builder_1.append(returnTransistion, "\t");
      _builder_1.append("\"/>");
      _builder_1.newLineIfNotEmpty();
      _builder_1.append("</transition>");
      _builder_1.newLine();
      _builder_1.append("<transition>");
      _builder_1.newLine();
      _builder_1.append("\t");
      _builder_1.append("<source ref=\"");
      StringConcatenation _builder_7 = new StringConcatenation();
      String _name_5 = statement.getVariable().getName();
      _builder_7.append(_name_5);
      _builder_7.append("_get");
      EObject _value_12 = statement.getVariableValue().getValue();
      COLOR _value_13 = ((ColorValue) _value_12).getValue();
      _builder_7.append(_value_13);
      _builder_7.append("_");
      int _indexOf_5 = UppaalGenerator.statementsIndexer.indexOf(statement);
      _builder_7.append(_indexOf_5);
      String _idOfLocation_4 = UppaalGenerator.getIdOfLocation(_builder_7.toString());
      _builder_1.append(_idOfLocation_4, "\t");
      _builder_1.append("\"/>");
      _builder_1.newLineIfNotEmpty();
      _builder_1.append("\t");
      _builder_1.append("<target ref=\"");
      _builder_1.append(returnTransistion, "\t");
      _builder_1.append("\"/>");
      _builder_1.newLineIfNotEmpty();
      _builder_1.append("\t");
      _builder_1.append("<label kind=\"guard\">currentSlot_colour != ");
      EObject _value_14 = statement.getVariableValue().getValue();
      int _ColourToInt_1 = EnumParser.ColourToInt(((ColorValue) _value_14).getValue());
      _builder_1.append(_ColourToInt_1, "\t");
      _builder_1.append("</label>");
      _builder_1.newLineIfNotEmpty();
      _builder_1.append("\t");
      _builder_1.append("<label kind=\"synchronisation\">");
      _builder_1.append(UppaalMasterGenerator.currentDisc, "\t");
      _builder_1.append("_gottenColourSlot?</label>");
      _builder_1.newLineIfNotEmpty();
      _builder_1.append("</transition>");
      _builder_1.newLine();
      final String trans = _builder_1.toString();
      UppaalMasterGenerator.lastTransistionState = returnTransistion;
      return trans;
    }
    throw new UnsupportedOperationException("This conditional value is not implemented yet");
  }
  
  protected static String _generateLocation(final CranePickupOperation statement) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("<location id=\"");
    StringConcatenation _builder_1 = new StringConcatenation();
    String _name = statement.getDevice().getName();
    _builder_1.append(_name);
    _builder_1.append("_goto_");
    CraneParameter _target = statement.getTarget();
    String _name_1 = ((CranePositionParameter) _target).getName();
    _builder_1.append(_name_1);
    _builder_1.append("_");
    int _indexOf = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_1.append(_indexOf);
    String _idOfLocation = UppaalGenerator.getIdOfLocation(_builder_1.toString());
    _builder.append(_idOfLocation);
    _builder.append("\">");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<name>");
    String _name_2 = statement.getDevice().getName();
    _builder.append(_name_2, "\t");
    _builder.append("_goto_");
    CraneParameter _target_1 = statement.getTarget();
    String _name_3 = ((CranePositionParameter) _target_1).getName();
    _builder.append(_name_3, "\t");
    _builder.append("_");
    int _indexOf_1 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder.append(_indexOf_1, "\t");
    _builder.append("</name>");
    _builder.newLineIfNotEmpty();
    _builder.append("</location>");
    _builder.newLine();
    _builder.append("<location id=\"");
    StringConcatenation _builder_2 = new StringConcatenation();
    String _name_4 = statement.getDevice().getName();
    _builder_2.append(_name_4);
    _builder_2.append("_lower_");
    int _indexOf_2 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_2.append(_indexOf_2);
    String _idOfLocation_1 = UppaalGenerator.getIdOfLocation(_builder_2.toString());
    _builder.append(_idOfLocation_1);
    _builder.append("\">");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<name>");
    String _name_5 = statement.getDevice().getName();
    _builder.append(_name_5, "\t");
    _builder.append("_lower_");
    int _indexOf_3 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder.append(_indexOf_3, "\t");
    _builder.append("</name>");
    _builder.newLineIfNotEmpty();
    _builder.append("</location>");
    _builder.newLine();
    _builder.append("<location id=\"");
    StringConcatenation _builder_3 = new StringConcatenation();
    String _name_6 = statement.getDevice().getName();
    _builder_3.append(_name_6);
    _builder_3.append("_toggleMagnet_");
    int _indexOf_4 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_3.append(_indexOf_4);
    String _idOfLocation_2 = UppaalGenerator.getIdOfLocation(_builder_3.toString());
    _builder.append(_idOfLocation_2);
    _builder.append("\">");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<name>");
    String _name_7 = statement.getDevice().getName();
    _builder.append(_name_7, "\t");
    _builder.append("_toggleMagnet_");
    int _indexOf_5 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder.append(_indexOf_5, "\t");
    _builder.append("</name>");
    _builder.newLineIfNotEmpty();
    _builder.append("</location>");
    _builder.newLine();
    _builder.append("<location id=\"");
    StringConcatenation _builder_4 = new StringConcatenation();
    String _name_8 = statement.getDevice().getName();
    _builder_4.append(_name_8);
    _builder_4.append("_raise_");
    int _indexOf_6 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_4.append(_indexOf_6);
    String _idOfLocation_3 = UppaalGenerator.getIdOfLocation(_builder_4.toString());
    _builder.append(_idOfLocation_3);
    _builder.append("\">");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<name>");
    String _name_9 = statement.getDevice().getName();
    _builder.append(_name_9, "\t");
    _builder.append("_raise_");
    int _indexOf_7 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder.append(_indexOf_7, "\t");
    _builder.append("</name>");
    _builder.newLineIfNotEmpty();
    _builder.append("</location>");
    _builder.newLine();
    return _builder.toString();
  }
  
  protected static String _generateTransistion(final CranePickupOperation statement) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("<transition>");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("<source ref=\"");
    _builder.append(UppaalMasterGenerator.lastTransistionState, "\t");
    _builder.append("\"/>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<target ref=\"");
    StringConcatenation _builder_1 = new StringConcatenation();
    String _name = statement.getDevice().getName();
    _builder_1.append(_name);
    _builder_1.append("_goto_");
    CraneParameter _target = statement.getTarget();
    String _name_1 = ((CranePositionParameter) _target).getName();
    _builder_1.append(_name_1);
    _builder_1.append("_");
    int _indexOf = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_1.append(_indexOf);
    String _idOfLocation = UppaalGenerator.getIdOfLocation(_builder_1.toString());
    _builder.append(_idOfLocation, "\t");
    _builder.append("\"/>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<label kind=\"synchronisation\">");
    String _name_2 = statement.getDevice().getName();
    _builder.append(_name_2, "\t");
    _builder.append("_goto_");
    CraneParameter _target_1 = statement.getTarget();
    String _name_3 = ((CranePositionParameter) _target_1).getName();
    _builder.append(_name_3, "\t");
    _builder.append("!</label>");
    _builder.newLineIfNotEmpty();
    _builder.append("</transition>");
    _builder.newLine();
    _builder.append("<transition>");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("<source ref=\"");
    StringConcatenation _builder_2 = new StringConcatenation();
    String _name_4 = statement.getDevice().getName();
    _builder_2.append(_name_4);
    _builder_2.append("_goto_");
    CraneParameter _target_2 = statement.getTarget();
    String _name_5 = ((CranePositionParameter) _target_2).getName();
    _builder_2.append(_name_5);
    _builder_2.append("_");
    int _indexOf_1 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_2.append(_indexOf_1);
    String _idOfLocation_1 = UppaalGenerator.getIdOfLocation(_builder_2.toString());
    _builder.append(_idOfLocation_1, "\t");
    _builder.append("\"/>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<target ref=\"");
    StringConcatenation _builder_3 = new StringConcatenation();
    String _name_6 = statement.getDevice().getName();
    _builder_3.append(_name_6);
    _builder_3.append("_lower_");
    int _indexOf_2 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_3.append(_indexOf_2);
    String _idOfLocation_2 = UppaalGenerator.getIdOfLocation(_builder_3.toString());
    _builder.append(_idOfLocation_2, "\t");
    _builder.append("\"/>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<label kind=\"synchronisation\">");
    String _name_7 = statement.getDevice().getName();
    _builder.append(_name_7, "\t");
    _builder.append("_lowerMagnet!</label>");
    _builder.newLineIfNotEmpty();
    _builder.append("</transition>");
    _builder.newLine();
    _builder.append("<transition>");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("<source ref=\"");
    StringConcatenation _builder_4 = new StringConcatenation();
    String _name_8 = statement.getDevice().getName();
    _builder_4.append(_name_8);
    _builder_4.append("_lower_");
    int _indexOf_3 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_4.append(_indexOf_3);
    String _idOfLocation_3 = UppaalGenerator.getIdOfLocation(_builder_4.toString());
    _builder.append(_idOfLocation_3, "\t");
    _builder.append("\"/>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<target ref=\"");
    StringConcatenation _builder_5 = new StringConcatenation();
    String _name_9 = statement.getDevice().getName();
    _builder_5.append(_name_9);
    _builder_5.append("_toggleMagnet_");
    int _indexOf_4 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_5.append(_indexOf_4);
    String _idOfLocation_4 = UppaalGenerator.getIdOfLocation(_builder_5.toString());
    _builder.append(_idOfLocation_4, "\t");
    _builder.append("\"/>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<label kind=\"synchronisation\">");
    String _name_10 = statement.getDevice().getName();
    _builder.append(_name_10, "\t");
    _builder.append("_toggleMagnet!</label>");
    _builder.newLineIfNotEmpty();
    _builder.append("</transition>");
    _builder.newLine();
    _builder.append("<transition>");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("<source ref=\"");
    StringConcatenation _builder_6 = new StringConcatenation();
    String _name_11 = statement.getDevice().getName();
    _builder_6.append(_name_11);
    _builder_6.append("_toggleMagnet_");
    int _indexOf_5 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_6.append(_indexOf_5);
    String _idOfLocation_5 = UppaalGenerator.getIdOfLocation(_builder_6.toString());
    _builder.append(_idOfLocation_5, "\t");
    _builder.append("\"/>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<target ref=\"");
    StringConcatenation _builder_7 = new StringConcatenation();
    String _name_12 = statement.getDevice().getName();
    _builder_7.append(_name_12);
    _builder_7.append("_raise_");
    int _indexOf_6 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_7.append(_indexOf_6);
    String _idOfLocation_6 = UppaalGenerator.getIdOfLocation(_builder_7.toString());
    _builder.append(_idOfLocation_6, "\t");
    _builder.append("\"/>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<label kind=\"synchronisation\">");
    String _name_13 = statement.getDevice().getName();
    _builder.append(_name_13, "\t");
    _builder.append("_raiseMagnet!</label>");
    _builder.newLineIfNotEmpty();
    _builder.append("</transition>");
    _builder.newLine();
    final String trans = _builder.toString();
    StringConcatenation _builder_8 = new StringConcatenation();
    String _name_14 = statement.getDevice().getName();
    _builder_8.append(_name_14);
    _builder_8.append("_raise_");
    int _indexOf_7 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_8.append(_indexOf_7);
    UppaalMasterGenerator.lastTransistionState = UppaalGenerator.getIdOfLocation(_builder_8.toString());
    return trans;
  }
  
  protected static String _generateLocation(final CraneDropOperation statement) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("<location id=\"");
    StringConcatenation _builder_1 = new StringConcatenation();
    String _name = statement.getDevice().getName();
    _builder_1.append(_name);
    _builder_1.append("_goto_");
    CraneParameter _target = statement.getTarget();
    String _name_1 = ((CranePositionParameter) _target).getName();
    _builder_1.append(_name_1);
    _builder_1.append("_");
    int _indexOf = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_1.append(_indexOf);
    String _idOfLocation = UppaalGenerator.getIdOfLocation(_builder_1.toString());
    _builder.append(_idOfLocation);
    _builder.append("\">");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<name>");
    String _name_2 = statement.getDevice().getName();
    _builder.append(_name_2, "\t");
    _builder.append("_goto_");
    CraneParameter _target_1 = statement.getTarget();
    String _name_3 = ((CranePositionParameter) _target_1).getName();
    _builder.append(_name_3, "\t");
    _builder.append("_");
    int _indexOf_1 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder.append(_indexOf_1, "\t");
    _builder.append("</name>");
    _builder.newLineIfNotEmpty();
    _builder.append("</location>");
    _builder.newLine();
    _builder.append("<location id=\"");
    StringConcatenation _builder_2 = new StringConcatenation();
    String _name_4 = statement.getDevice().getName();
    _builder_2.append(_name_4);
    _builder_2.append("_lower_");
    CraneParameter _target_2 = statement.getTarget();
    String _name_5 = ((CranePositionParameter) _target_2).getName();
    _builder_2.append(_name_5);
    _builder_2.append("_");
    int _indexOf_2 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_2.append(_indexOf_2);
    String _idOfLocation_1 = UppaalGenerator.getIdOfLocation(_builder_2.toString());
    _builder.append(_idOfLocation_1);
    _builder.append("\">");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<name>");
    String _name_6 = statement.getDevice().getName();
    _builder.append(_name_6, "\t");
    _builder.append("_lower_");
    CraneParameter _target_3 = statement.getTarget();
    String _name_7 = ((CranePositionParameter) _target_3).getName();
    _builder.append(_name_7, "\t");
    _builder.append("_");
    int _indexOf_3 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder.append(_indexOf_3, "\t");
    _builder.append("</name>");
    _builder.newLineIfNotEmpty();
    _builder.append("</location>");
    _builder.newLine();
    _builder.append("<location id=\"");
    StringConcatenation _builder_3 = new StringConcatenation();
    String _name_8 = statement.getDevice().getName();
    _builder_3.append(_name_8);
    _builder_3.append("_toggleMagnet_");
    int _indexOf_4 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_3.append(_indexOf_4);
    String _idOfLocation_2 = UppaalGenerator.getIdOfLocation(_builder_3.toString());
    _builder.append(_idOfLocation_2);
    _builder.append("\">");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<name>");
    String _name_9 = statement.getDevice().getName();
    _builder.append(_name_9, "\t");
    _builder.append("_toggleMagnet_");
    int _indexOf_5 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder.append(_indexOf_5, "\t");
    _builder.append("</name>");
    _builder.newLineIfNotEmpty();
    _builder.append("</location>");
    _builder.newLine();
    _builder.append("<location id=\"");
    StringConcatenation _builder_4 = new StringConcatenation();
    String _name_10 = statement.getDevice().getName();
    _builder_4.append(_name_10);
    _builder_4.append("_raise_");
    int _indexOf_6 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_4.append(_indexOf_6);
    String _idOfLocation_3 = UppaalGenerator.getIdOfLocation(_builder_4.toString());
    _builder.append(_idOfLocation_3);
    _builder.append("\">");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<name>");
    String _name_11 = statement.getDevice().getName();
    _builder.append(_name_11, "\t");
    _builder.append("_raise_");
    int _indexOf_7 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder.append(_indexOf_7, "\t");
    _builder.append("</name>");
    _builder.newLineIfNotEmpty();
    _builder.append("</location>");
    _builder.newLine();
    return _builder.toString();
  }
  
  protected static String _generateTransistion(final CraneDropOperation statement) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("<transition>");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("<source ref=\"");
    _builder.append(UppaalMasterGenerator.lastTransistionState, "\t");
    _builder.append("\"/>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<target ref=\"");
    StringConcatenation _builder_1 = new StringConcatenation();
    String _name = statement.getDevice().getName();
    _builder_1.append(_name);
    _builder_1.append("_goto_");
    CraneParameter _target = statement.getTarget();
    String _name_1 = ((CranePositionParameter) _target).getName();
    _builder_1.append(_name_1);
    _builder_1.append("_");
    int _indexOf = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_1.append(_indexOf);
    String _idOfLocation = UppaalGenerator.getIdOfLocation(_builder_1.toString());
    _builder.append(_idOfLocation, "\t");
    _builder.append("\"/>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<label kind=\"synchronisation\">");
    String _name_2 = statement.getDevice().getName();
    _builder.append(_name_2, "\t");
    _builder.append("_goto_");
    CraneParameter _target_1 = statement.getTarget();
    String _name_3 = ((CranePositionParameter) _target_1).getName();
    _builder.append(_name_3, "\t");
    _builder.append("!</label>");
    _builder.newLineIfNotEmpty();
    _builder.append("</transition>");
    _builder.newLine();
    _builder.append("<transition>");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("<source ref=\"");
    StringConcatenation _builder_2 = new StringConcatenation();
    String _name_4 = statement.getDevice().getName();
    _builder_2.append(_name_4);
    _builder_2.append("_goto_");
    CraneParameter _target_2 = statement.getTarget();
    String _name_5 = ((CranePositionParameter) _target_2).getName();
    _builder_2.append(_name_5);
    _builder_2.append("_");
    int _indexOf_1 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_2.append(_indexOf_1);
    String _idOfLocation_1 = UppaalGenerator.getIdOfLocation(_builder_2.toString());
    _builder.append(_idOfLocation_1, "\t");
    _builder.append("\"/>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<target ref=\"");
    StringConcatenation _builder_3 = new StringConcatenation();
    String _name_6 = statement.getDevice().getName();
    _builder_3.append(_name_6);
    _builder_3.append("_lower_");
    CraneParameter _target_3 = statement.getTarget();
    String _name_7 = ((CranePositionParameter) _target_3).getName();
    _builder_3.append(_name_7);
    _builder_3.append("_");
    int _indexOf_2 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_3.append(_indexOf_2);
    String _idOfLocation_2 = UppaalGenerator.getIdOfLocation(_builder_3.toString());
    _builder.append(_idOfLocation_2, "\t");
    _builder.append("\"/>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<label kind=\"synchronisation\">");
    String _name_8 = statement.getDevice().getName();
    _builder.append(_name_8, "\t");
    _builder.append("_lowerMagnet!</label>");
    _builder.newLineIfNotEmpty();
    _builder.append("</transition>");
    _builder.newLine();
    _builder.append("<transition>");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("<source ref=\"");
    StringConcatenation _builder_4 = new StringConcatenation();
    String _name_9 = statement.getDevice().getName();
    _builder_4.append(_name_9);
    _builder_4.append("_lower_");
    CraneParameter _target_4 = statement.getTarget();
    String _name_10 = ((CranePositionParameter) _target_4).getName();
    _builder_4.append(_name_10);
    _builder_4.append("_");
    int _indexOf_3 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_4.append(_indexOf_3);
    String _idOfLocation_3 = UppaalGenerator.getIdOfLocation(_builder_4.toString());
    _builder.append(_idOfLocation_3, "\t");
    _builder.append("\"/>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<target ref=\"");
    StringConcatenation _builder_5 = new StringConcatenation();
    String _name_11 = statement.getDevice().getName();
    _builder_5.append(_name_11);
    _builder_5.append("_toggleMagnet_");
    int _indexOf_4 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_5.append(_indexOf_4);
    String _idOfLocation_4 = UppaalGenerator.getIdOfLocation(_builder_5.toString());
    _builder.append(_idOfLocation_4, "\t");
    _builder.append("\"/>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<label kind=\"synchronisation\">");
    String _name_12 = statement.getDevice().getName();
    _builder.append(_name_12, "\t");
    _builder.append("_toggleMagnet!</label>");
    _builder.newLineIfNotEmpty();
    _builder.append("</transition>");
    _builder.newLine();
    _builder.append("<transition>");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("<source ref=\"");
    StringConcatenation _builder_6 = new StringConcatenation();
    String _name_13 = statement.getDevice().getName();
    _builder_6.append(_name_13);
    _builder_6.append("_toggleMagnet_");
    int _indexOf_5 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_6.append(_indexOf_5);
    String _idOfLocation_5 = UppaalGenerator.getIdOfLocation(_builder_6.toString());
    _builder.append(_idOfLocation_5, "\t");
    _builder.append("\"/>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<target ref=\"");
    StringConcatenation _builder_7 = new StringConcatenation();
    String _name_14 = statement.getDevice().getName();
    _builder_7.append(_name_14);
    _builder_7.append("_raise_");
    int _indexOf_6 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_7.append(_indexOf_6);
    String _idOfLocation_6 = UppaalGenerator.getIdOfLocation(_builder_7.toString());
    _builder.append(_idOfLocation_6, "\t");
    _builder.append("\"/>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<label kind=\"synchronisation\">");
    String _name_15 = statement.getDevice().getName();
    _builder.append(_name_15, "\t");
    _builder.append("_raiseMagnet!</label>");
    _builder.newLineIfNotEmpty();
    _builder.append("</transition>");
    _builder.newLine();
    final String trans = _builder.toString();
    StringConcatenation _builder_8 = new StringConcatenation();
    String _name_16 = statement.getDevice().getName();
    _builder_8.append(_name_16);
    _builder_8.append("_raise_");
    int _indexOf_7 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_8.append(_indexOf_7);
    UppaalMasterGenerator.lastTransistionState = UppaalGenerator.getIdOfLocation(_builder_8.toString());
    return trans;
  }
  
  protected static String _generateLocation(final DiskMoveSlotOperation statement) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("<location id=\"");
    StringConcatenation _builder_1 = new StringConcatenation();
    String _name = statement.getDevice().getName();
    _builder_1.append(_name);
    _builder_1.append("_goto_");
    String _name_1 = statement.getTarget().getName();
    _builder_1.append(_name_1);
    _builder_1.append("_statement");
    int _indexOf = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_1.append(_indexOf);
    String _idOfLocation = UppaalGenerator.getIdOfLocation(_builder_1.toString());
    _builder.append(_idOfLocation);
    _builder.append("\">");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<name>");
    String _name_2 = statement.getDevice().getName();
    _builder.append(_name_2, "\t");
    _builder.append("_goto_");
    String _name_3 = statement.getTarget().getName();
    _builder.append(_name_3, "\t");
    _builder.append("_statement");
    int _indexOf_1 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder.append(_indexOf_1, "\t");
    _builder.append("</name>");
    _builder.newLineIfNotEmpty();
    _builder.append("</location>");
    _builder.newLine();
    return _builder.toString();
  }
  
  protected static String _generateTransistion(final DiskMoveSlotOperation statement) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("<transition>");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("<source ref=\"");
    _builder.append(UppaalMasterGenerator.lastTransistionState, "\t");
    _builder.append("\"/>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<target ref=\"");
    StringConcatenation _builder_1 = new StringConcatenation();
    String _name = statement.getDevice().getName();
    _builder_1.append(_name);
    _builder_1.append("_goto_");
    String _name_1 = statement.getTarget().getName();
    _builder_1.append(_name_1);
    _builder_1.append("_statement");
    int _indexOf = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_1.append(_indexOf);
    String _idOfLocation = UppaalGenerator.getIdOfLocation(_builder_1.toString());
    _builder.append(_idOfLocation, "\t");
    _builder.append("\"/>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<label kind=\"synchronisation\">");
    String _name_2 = statement.getDevice().getName();
    _builder.append(_name_2, "\t");
    _builder.append("_goto[(");
    String _name_3 = statement.getDevice().getName();
    _builder.append(_name_3, "\t");
    _builder.append("_zones_");
    String _name_4 = statement.getTarget().getName();
    _builder.append(_name_4, "\t");
    _builder.append(" + currentSlot) % ");
    String _name_5 = statement.getDevice().getName();
    _builder.append(_name_5, "\t");
    _builder.append("_numberOfSlots]!</label>");
    _builder.newLineIfNotEmpty();
    _builder.append("</transition>");
    _builder.newLine();
    final String trans = _builder.toString();
    StringConcatenation _builder_2 = new StringConcatenation();
    String _name_6 = statement.getDevice().getName();
    _builder_2.append(_name_6);
    _builder_2.append("_goto_");
    String _name_7 = statement.getTarget().getName();
    _builder_2.append(_name_7);
    _builder_2.append("_statement");
    int _indexOf_1 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_2.append(_indexOf_1);
    UppaalMasterGenerator.lastTransistionState = UppaalGenerator.getIdOfLocation(_builder_2.toString());
    return trans;
  }
  
  protected static String _generateLocation(final DiskMoveVariableSlotOperation statement) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("<location id=\"");
    StringConcatenation _builder_1 = new StringConcatenation();
    String _name = statement.getDevice().getName();
    _builder_1.append(_name);
    _builder_1.append("_goto_");
    String _name_1 = statement.getTarget().getName();
    _builder_1.append(_name_1);
    _builder_1.append("_statment");
    int _indexOf = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_1.append(_indexOf);
    String _idOfLocation = UppaalGenerator.getIdOfLocation(_builder_1.toString());
    _builder.append(_idOfLocation);
    _builder.append("\">");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<name>");
    String _name_2 = statement.getDevice().getName();
    _builder.append(_name_2, "\t");
    _builder.append("goto_");
    String _name_3 = statement.getTarget().getName();
    _builder.append(_name_3, "\t");
    _builder.append("_statment");
    int _indexOf_1 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder.append(_indexOf_1, "\t");
    _builder.append("</name>");
    _builder.newLineIfNotEmpty();
    _builder.append("</location>");
    _builder.newLine();
    return _builder.toString();
  }
  
  protected static String _generateTransistion(final DiskMoveVariableSlotOperation statement) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("<transition>");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("<source ref=\"");
    _builder.append(UppaalMasterGenerator.lastTransistionState, "\t");
    _builder.append("\"/>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<target ref=\"");
    StringConcatenation _builder_1 = new StringConcatenation();
    String _name = statement.getDevice().getName();
    _builder_1.append(_name);
    _builder_1.append("_goto_");
    String _name_1 = statement.getTarget().getName();
    _builder_1.append(_name_1);
    _builder_1.append("_statment");
    int _indexOf = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_1.append(_indexOf);
    String _idOfLocation = UppaalGenerator.getIdOfLocation(_builder_1.toString());
    _builder.append(_idOfLocation, "\t");
    _builder.append("\"/>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<label kind=\"synchronisation\">");
    String _name_2 = statement.getDevice().getName();
    _builder.append(_name_2, "\t");
    _builder.append("_goto[(");
    String _name_3 = statement.getDevice().getName();
    _builder.append(_name_3, "\t");
    _builder.append("_zones_");
    String _name_4 = statement.getTarget().getName();
    _builder.append(_name_4, "\t");
    _builder.append(" + currentSlot) % ");
    String _name_5 = statement.getDevice().getName();
    _builder.append(_name_5, "\t");
    _builder.append("_numberOfSlots]!</label>");
    _builder.newLineIfNotEmpty();
    _builder.append("</transition>");
    _builder.newLine();
    final String trans = _builder.toString();
    StringConcatenation _builder_2 = new StringConcatenation();
    String _name_6 = statement.getDevice().getName();
    _builder_2.append(_name_6);
    _builder_2.append("_goto_");
    String _name_7 = statement.getTarget().getName();
    _builder_2.append(_name_7);
    _builder_2.append("_statment");
    int _indexOf_1 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_2.append(_indexOf_1);
    UppaalMasterGenerator.lastTransistionState = UppaalGenerator.getIdOfLocation(_builder_2.toString());
    return trans;
  }
  
  protected static String _generateLocation(final DiskMoveEmptySlotOperation statement) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("<location id=\"");
    StringConcatenation _builder_1 = new StringConcatenation();
    String _name = statement.getDevice().getName();
    _builder_1.append(_name);
    _builder_1.append("_getemptySlot_statement");
    int _indexOf = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_1.append(_indexOf);
    String _idOfLocation = UppaalGenerator.getIdOfLocation(_builder_1.toString());
    _builder.append(_idOfLocation);
    _builder.append("\">");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<name>");
    String _name_1 = statement.getDevice().getName();
    _builder.append(_name_1, "\t");
    _builder.append("_getemptySlot_statment");
    int _indexOf_1 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder.append(_indexOf_1, "\t");
    _builder.append("</name>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<committed/>");
    _builder.newLine();
    _builder.append("</location>");
    _builder.newLine();
    _builder.append("<location id=\"");
    StringConcatenation _builder_2 = new StringConcatenation();
    String _name_2 = statement.getDevice().getName();
    _builder_2.append(_name_2);
    _builder_2.append("_gottenemptySlot_statement");
    int _indexOf_2 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_2.append(_indexOf_2);
    String _idOfLocation_1 = UppaalGenerator.getIdOfLocation(_builder_2.toString());
    _builder.append(_idOfLocation_1);
    _builder.append("\">");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<name>");
    String _name_3 = statement.getDevice().getName();
    _builder.append(_name_3, "\t");
    _builder.append("_gottenemptySlot_statment");
    int _indexOf_3 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder.append(_indexOf_3, "\t");
    _builder.append("</name>");
    _builder.newLineIfNotEmpty();
    _builder.append("</location>");
    _builder.newLine();
    _builder.append("<location id=\"");
    StringConcatenation _builder_3 = new StringConcatenation();
    String _name_4 = statement.getDevice().getName();
    _builder_3.append(_name_4);
    _builder_3.append("_goto_");
    String _name_5 = statement.getTarget().getName();
    _builder_3.append(_name_5);
    _builder_3.append("_statement");
    int _indexOf_4 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_3.append(_indexOf_4);
    String _idOfLocation_2 = UppaalGenerator.getIdOfLocation(_builder_3.toString());
    _builder.append(_idOfLocation_2);
    _builder.append("\">");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<name>");
    String _name_6 = statement.getDevice().getName();
    _builder.append(_name_6, "\t");
    _builder.append("_goto_");
    String _name_7 = statement.getTarget().getName();
    _builder.append(_name_7, "\t");
    _builder.append("_statment");
    int _indexOf_5 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder.append(_indexOf_5, "\t");
    _builder.append("</name>");
    _builder.newLineIfNotEmpty();
    _builder.append("</location>");
    _builder.newLine();
    return _builder.toString();
  }
  
  protected static String _generateTransistion(final DiskMoveEmptySlotOperation statement) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("<transition>");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("<source ref=\"");
    _builder.append(UppaalMasterGenerator.lastTransistionState, "\t");
    _builder.append("\"/>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<target ref=\"");
    StringConcatenation _builder_1 = new StringConcatenation();
    String _name = statement.getDevice().getName();
    _builder_1.append(_name);
    _builder_1.append("_getemptySlot_statement");
    int _indexOf = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_1.append(_indexOf);
    String _idOfLocation = UppaalGenerator.getIdOfLocation(_builder_1.toString());
    _builder.append(_idOfLocation, "\t");
    _builder.append("\"/>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<label kind=\"synchronisation\">");
    String _name_1 = statement.getDevice().getName();
    _builder.append(_name_1, "\t");
    _builder.append("_getemptySlot!</label>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<label kind=\"assignment\">GlobalTimer = 0</label>");
    _builder.newLine();
    _builder.append("</transition>");
    _builder.newLine();
    _builder.append("<transition>");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("<source ref=\"");
    StringConcatenation _builder_2 = new StringConcatenation();
    String _name_2 = statement.getDevice().getName();
    _builder_2.append(_name_2);
    _builder_2.append("_getemptySlot_statement");
    int _indexOf_1 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_2.append(_indexOf_1);
    String _idOfLocation_1 = UppaalGenerator.getIdOfLocation(_builder_2.toString());
    _builder.append(_idOfLocation_1, "\t");
    _builder.append("\"/>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<target ref=\"");
    StringConcatenation _builder_3 = new StringConcatenation();
    String _name_3 = statement.getDevice().getName();
    _builder_3.append(_name_3);
    _builder_3.append("_gottenemptySlot_statement");
    int _indexOf_2 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_3.append(_indexOf_2);
    String _idOfLocation_2 = UppaalGenerator.getIdOfLocation(_builder_3.toString());
    _builder.append(_idOfLocation_2, "\t");
    _builder.append("\"/>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<label kind=\"synchronisation\">");
    String _name_4 = statement.getDevice().getName();
    _builder.append(_name_4, "\t");
    _builder.append("_foundemptySlot?</label>");
    _builder.newLineIfNotEmpty();
    _builder.append("</transition>");
    _builder.newLine();
    _builder.append("<transition>");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("<source ref=\"");
    StringConcatenation _builder_4 = new StringConcatenation();
    String _name_5 = statement.getDevice().getName();
    _builder_4.append(_name_5);
    _builder_4.append("_gottenemptySlot_statement");
    int _indexOf_3 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_4.append(_indexOf_3);
    String _idOfLocation_3 = UppaalGenerator.getIdOfLocation(_builder_4.toString());
    _builder.append(_idOfLocation_3, "\t");
    _builder.append("\"/>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<target ref=\"");
    StringConcatenation _builder_5 = new StringConcatenation();
    String _name_6 = statement.getDevice().getName();
    _builder_5.append(_name_6);
    _builder_5.append("_goto_");
    String _name_7 = statement.getTarget().getName();
    _builder_5.append(_name_7);
    _builder_5.append("_statement");
    int _indexOf_4 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_5.append(_indexOf_4);
    String _idOfLocation_4 = UppaalGenerator.getIdOfLocation(_builder_5.toString());
    _builder.append(_idOfLocation_4, "\t");
    _builder.append("\"/>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<label kind=\"synchronisation\">");
    String _name_8 = statement.getDevice().getName();
    _builder.append(_name_8, "\t");
    _builder.append("_goto[(");
    String _name_9 = statement.getDevice().getName();
    _builder.append(_name_9, "\t");
    _builder.append("_zones_");
    String _name_10 = statement.getTarget().getName();
    _builder.append(_name_10, "\t");
    _builder.append(" + currentSlot) % ");
    String _name_11 = statement.getDevice().getName();
    _builder.append(_name_11, "\t");
    _builder.append("_numberOfSlots]!</label>");
    _builder.newLineIfNotEmpty();
    _builder.append("</transition>");
    _builder.newLine();
    final String trans = _builder.toString();
    StringConcatenation _builder_6 = new StringConcatenation();
    String _name_12 = statement.getDevice().getName();
    _builder_6.append(_name_12);
    _builder_6.append("_goto_");
    String _name_13 = statement.getTarget().getName();
    _builder_6.append(_name_13);
    _builder_6.append("_statement");
    int _indexOf_5 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_6.append(_indexOf_5);
    UppaalMasterGenerator.lastTransistionState = UppaalGenerator.getIdOfLocation(_builder_6.toString());
    UppaalMasterGenerator.currentDisc = statement.getDevice().getName();
    return trans;
  }
  
  protected static String _generateLocation(final DiskMarkSlotOperation statement) {
    String _xblockexpression = null;
    {
      String value = "";
      EObject _value = statement.getDiskSlotValue().getValue();
      boolean _matched = false;
      if (_value instanceof DiskSlotStateValue) {
        _matched=true;
        EObject _value_1 = statement.getDiskSlotValue().getValue();
        value = ((DiskSlotStateValue) _value_1).getValue().toString();
      }
      if (!_matched) {
        if (_value instanceof ColorValue) {
          _matched=true;
          EObject _value_1 = statement.getDiskSlotValue().getValue();
          value = ((ColorValue) _value_1).getValue().toString();
        }
      }
      if (!_matched) {
        value = "Colour";
      }
      StringConcatenation _builder = new StringConcatenation();
      {
        int _quantity = statement.getQuantity();
        boolean _greaterThan = (_quantity > 0);
        if (_greaterThan) {
          _builder.append("<location id=\"");
          StringConcatenation _builder_1 = new StringConcatenation();
          String _name = statement.getDevice().getName();
          _builder_1.append(_name);
          _builder_1.append("_markSlot");
          _builder_1.append(value);
          _builder_1.append("In");
          int _quantity_1 = statement.getQuantity();
          _builder_1.append(_quantity_1);
          TIME _measure = statement.getMeasure();
          _builder_1.append(_measure);
          _builder_1.append("_");
          int _indexOf = UppaalGenerator.statementsIndexer.indexOf(statement);
          _builder_1.append(_indexOf);
          String _idOfLocation = UppaalGenerator.getIdOfLocation(_builder_1.toString());
          _builder.append(_idOfLocation);
          _builder.append("\">");
          _builder.newLineIfNotEmpty();
          _builder.append("\t");
          _builder.append("<name>");
          String _name_1 = statement.getDevice().getName();
          _builder.append(_name_1, "\t");
          _builder.append("_markSlot");
          _builder.append(value, "\t");
          _builder.append("In");
          int _quantity_2 = statement.getQuantity();
          _builder.append(_quantity_2, "\t");
          TIME _measure_1 = statement.getMeasure();
          _builder.append(_measure_1, "\t");
          _builder.append("_");
          int _indexOf_1 = UppaalGenerator.statementsIndexer.indexOf(statement);
          _builder.append(_indexOf_1, "\t");
          _builder.append("</name>");
          _builder.newLineIfNotEmpty();
          _builder.append("</location>");
          _builder.newLine();
        }
      }
      {
        if ((value == "free")) {
          _builder.append("<location id=\"");
          StringConcatenation _builder_2 = new StringConcatenation();
          String _name_2 = statement.getDevice().getName();
          _builder_2.append(_name_2);
          _builder_2.append("_markSlotopposite_");
          int _indexOf_2 = UppaalGenerator.statementsIndexer.indexOf(statement);
          _builder_2.append(_indexOf_2);
          String _idOfLocation_1 = UppaalGenerator.getIdOfLocation(_builder_2.toString());
          _builder.append(_idOfLocation_1);
          _builder.append("\">");
          _builder.newLineIfNotEmpty();
          _builder.append("\t");
          _builder.append("<name>");
          String _name_3 = statement.getDevice().getName();
          _builder.append(_name_3, "\t");
          _builder.append("_markSlotempty_");
          int _indexOf_3 = UppaalGenerator.statementsIndexer.indexOf(statement);
          _builder.append(_indexOf_3, "\t");
          _builder.append("</name>");
          _builder.newLineIfNotEmpty();
          _builder.append("</location>");
          _builder.newLine();
        }
      }
      {
        if ((value == "empty")) {
          _builder.append("<location id=\"");
          StringConcatenation _builder_3 = new StringConcatenation();
          String _name_4 = statement.getDevice().getName();
          _builder_3.append(_name_4);
          _builder_3.append("_markSlotopposite_");
          int _indexOf_4 = UppaalGenerator.statementsIndexer.indexOf(statement);
          _builder_3.append(_indexOf_4);
          String _idOfLocation_2 = UppaalGenerator.getIdOfLocation(_builder_3.toString());
          _builder.append(_idOfLocation_2);
          _builder.append("\">");
          _builder.newLineIfNotEmpty();
          _builder.append("\t");
          _builder.append("<name>");
          String _name_5 = statement.getDevice().getName();
          _builder.append(_name_5, "\t");
          _builder.append("_markSlotfree_");
          int _indexOf_5 = UppaalGenerator.statementsIndexer.indexOf(statement);
          _builder.append(_indexOf_5, "\t");
          _builder.append("</name>");
          _builder.newLineIfNotEmpty();
          _builder.append("</location>");
          _builder.newLine();
        }
      }
      {
        if ((value == "in_progress")) {
          _builder.append("<location id=\"");
          StringConcatenation _builder_4 = new StringConcatenation();
          String _name_6 = statement.getDevice().getName();
          _builder_4.append(_name_6);
          _builder_4.append("_markSlotfull_");
          int _indexOf_6 = UppaalGenerator.statementsIndexer.indexOf(statement);
          _builder_4.append(_indexOf_6);
          String _idOfLocation_3 = UppaalGenerator.getIdOfLocation(_builder_4.toString());
          _builder.append(_idOfLocation_3);
          _builder.append("\">");
          _builder.newLineIfNotEmpty();
          _builder.append("\t");
          _builder.append("<name>");
          String _name_7 = statement.getDevice().getName();
          _builder.append(_name_7, "\t");
          _builder.append("_markSlotfull_");
          int _indexOf_7 = UppaalGenerator.statementsIndexer.indexOf(statement);
          _builder.append(_indexOf_7, "\t");
          _builder.append("</name>");
          _builder.newLineIfNotEmpty();
          _builder.append("</location>");
          _builder.newLine();
        }
      }
      _builder.append("<location id=\"");
      StringConcatenation _builder_5 = new StringConcatenation();
      String _name_8 = statement.getDevice().getName();
      _builder_5.append(_name_8);
      _builder_5.append("_markSlot");
      _builder_5.append(value);
      _builder_5.append("_statement");
      int _indexOf_8 = UppaalGenerator.statementsIndexer.indexOf(statement);
      _builder_5.append(_indexOf_8);
      String _idOfLocation_4 = UppaalGenerator.getIdOfLocation(_builder_5.toString());
      _builder.append(_idOfLocation_4);
      _builder.append("\">");
      _builder.newLineIfNotEmpty();
      _builder.append("\t");
      _builder.append("<name>");
      String _name_9 = statement.getDevice().getName();
      _builder.append(_name_9, "\t");
      _builder.append("_markSlot");
      _builder.append(value, "\t");
      _builder.append("_statement");
      int _indexOf_9 = UppaalGenerator.statementsIndexer.indexOf(statement);
      _builder.append(_indexOf_9, "\t");
      _builder.append("</name>");
      _builder.newLineIfNotEmpty();
      _builder.append("</location>");
      _builder.newLine();
      _xblockexpression = _builder.toString();
    }
    return _xblockexpression;
  }
  
  protected static String _generateTransistion(final DiskMarkSlotOperation statement) {
    String value = "";
    EObject _value = statement.getDiskSlotValue().getValue();
    boolean _matched = false;
    if (_value instanceof DiskSlotStateValue) {
      _matched=true;
      EObject _value_1 = statement.getDiskSlotValue().getValue();
      value = ((DiskSlotStateValue) _value_1).getValue().toString();
    }
    if (!_matched) {
      if (_value instanceof ColorValue) {
        _matched=true;
        EObject _value_1 = statement.getDiskSlotValue().getValue();
        value = ((ColorValue) _value_1).getValue().toString();
      }
    }
    if (!_matched) {
      value = "Colour";
    }
    StringConcatenation _builder = new StringConcatenation();
    {
      int _quantity = statement.getQuantity();
      boolean _greaterThan = (_quantity > 0);
      if (_greaterThan) {
        _builder.append("<transition>");
        _builder.newLine();
        _builder.append("\t");
        _builder.append("<source ref=\"");
        _builder.append(UppaalMasterGenerator.lastTransistionState, "\t");
        _builder.append("\"/>");
        _builder.newLineIfNotEmpty();
        _builder.append("\t");
        _builder.append("<target ref=\"");
        StringConcatenation _builder_1 = new StringConcatenation();
        String _name = statement.getDevice().getName();
        _builder_1.append(_name);
        _builder_1.append("_markSlot");
        _builder_1.append(value);
        _builder_1.append("In");
        int _quantity_1 = statement.getQuantity();
        _builder_1.append(_quantity_1);
        TIME _measure = statement.getMeasure();
        _builder_1.append(_measure);
        _builder_1.append("_");
        int _indexOf = UppaalGenerator.statementsIndexer.indexOf(statement);
        _builder_1.append(_indexOf);
        String _idOfLocation = UppaalGenerator.getIdOfLocation(_builder_1.toString());
        _builder.append(_idOfLocation, "\t");
        _builder.append("\"/>");
        _builder.newLineIfNotEmpty();
        _builder.append("\t");
        _builder.append("<label kind=\"assignment\">timer = 0</label>");
        _builder.newLine();
        _builder.append("</transition>");
        _builder.newLine();
        _builder.append("<transition>");
        _builder.newLine();
        _builder.append("\t");
        _builder.append("<source ref=\"");
        StringConcatenation _builder_2 = new StringConcatenation();
        String _name_1 = statement.getDevice().getName();
        _builder_2.append(_name_1);
        _builder_2.append("_markSlot");
        _builder_2.append(value);
        _builder_2.append("In");
        int _quantity_2 = statement.getQuantity();
        _builder_2.append(_quantity_2);
        TIME _measure_1 = statement.getMeasure();
        _builder_2.append(_measure_1);
        _builder_2.append("_");
        int _indexOf_1 = UppaalGenerator.statementsIndexer.indexOf(statement);
        _builder_2.append(_indexOf_1);
        String _idOfLocation_1 = UppaalGenerator.getIdOfLocation(_builder_2.toString());
        _builder.append(_idOfLocation_1, "\t");
        _builder.append("\"/>");
        _builder.newLineIfNotEmpty();
        _builder.append("\t");
        _builder.append("<target ref=\"");
        StringConcatenation _builder_3 = new StringConcatenation();
        String _name_2 = statement.getDevice().getName();
        _builder_3.append(_name_2);
        _builder_3.append("_markSlot");
        _builder_3.append(value);
        _builder_3.append("_statement");
        int _indexOf_2 = UppaalGenerator.statementsIndexer.indexOf(statement);
        _builder_3.append(_indexOf_2);
        String _idOfLocation_2 = UppaalGenerator.getIdOfLocation(_builder_3.toString());
        _builder.append(_idOfLocation_2, "\t");
        _builder.append("\"/>");
        _builder.newLineIfNotEmpty();
        _builder.append("\t");
        _builder.append("<label kind=\"guard\">timer &gt;= ");
        int _quantity_3 = statement.getQuantity();
        _builder.append(_quantity_3, "\t");
        _builder.append("</label>");
        _builder.newLineIfNotEmpty();
        {
          if ((value == "Colour")) {
            _builder.append("\t");
            _builder.append("<label kind=\"synchronisation\">");
            String _name_3 = statement.getDevice().getName();
            _builder.append(_name_3, "\t");
            _builder.append("_set");
            _builder.append(value, "\t");
            _builder.append("[currentSlot][colour]!</label>");
            _builder.newLineIfNotEmpty();
          } else {
            _builder.append("\t");
            _builder.append("<label kind=\"synchronisation\">");
            String _name_4 = statement.getDevice().getName();
            _builder.append(_name_4, "\t");
            _builder.append("_set_");
            _builder.append(value, "\t");
            _builder.append("[currentSlot]!</label>");
            _builder.newLineIfNotEmpty();
          }
        }
        _builder.append("</transition>");
        _builder.newLine();
      } else {
        _builder.append("<transition>");
        _builder.newLine();
        _builder.append("\t");
        _builder.append("<source ref=\"");
        _builder.append(UppaalMasterGenerator.lastTransistionState, "\t");
        _builder.append("\"/>");
        _builder.newLineIfNotEmpty();
        _builder.append("\t");
        _builder.append("<target ref=\"");
        StringConcatenation _builder_4 = new StringConcatenation();
        String _name_5 = statement.getDevice().getName();
        _builder_4.append(_name_5);
        _builder_4.append("_markSlot");
        _builder_4.append(value);
        _builder_4.append("_statement");
        int _indexOf_3 = UppaalGenerator.statementsIndexer.indexOf(statement);
        _builder_4.append(_indexOf_3);
        String _idOfLocation_3 = UppaalGenerator.getIdOfLocation(_builder_4.toString());
        _builder.append(_idOfLocation_3, "\t");
        _builder.append("\"/>");
        _builder.newLineIfNotEmpty();
        {
          if ((value == "Colour")) {
            _builder.append("\t");
            _builder.append("<label kind=\"synchronisation\">");
            String _name_6 = statement.getDevice().getName();
            _builder.append(_name_6, "\t");
            _builder.append("_set");
            _builder.append(value, "\t");
            _builder.append("[currentSlot][colour]!</label>");
            _builder.newLineIfNotEmpty();
          } else {
            _builder.append("\t");
            _builder.append("<label kind=\"synchronisation\">");
            String _name_7 = statement.getDevice().getName();
            _builder.append(_name_7, "\t");
            _builder.append("_set_");
            _builder.append(value, "\t");
            _builder.append("[currentSlot]!</label>");
            _builder.newLineIfNotEmpty();
          }
        }
        _builder.append("</transition>");
        _builder.newLine();
      }
    }
    {
      if (((value == "free") || Objects.equal(value, "empty"))) {
        _builder.append("<transition>");
        _builder.newLine();
        _builder.append("\t");
        _builder.append("<source ref=\"");
        StringConcatenation _builder_5 = new StringConcatenation();
        String _name_8 = statement.getDevice().getName();
        _builder_5.append(_name_8);
        _builder_5.append("_markSlot");
        _builder_5.append(value);
        _builder_5.append("_statement");
        int _indexOf_4 = UppaalGenerator.statementsIndexer.indexOf(statement);
        _builder_5.append(_indexOf_4);
        String _idOfLocation_4 = UppaalGenerator.getIdOfLocation(_builder_5.toString());
        _builder.append(_idOfLocation_4, "\t");
        _builder.append("\"/>");
        _builder.newLineIfNotEmpty();
        _builder.append("\t");
        _builder.append("<target ref=\"");
        StringConcatenation _builder_6 = new StringConcatenation();
        String _name_9 = statement.getDevice().getName();
        _builder_6.append(_name_9);
        _builder_6.append("_markSlotopposite_");
        int _indexOf_5 = UppaalGenerator.statementsIndexer.indexOf(statement);
        _builder_6.append(_indexOf_5);
        String _idOfLocation_5 = UppaalGenerator.getIdOfLocation(_builder_6.toString());
        _builder.append(_idOfLocation_5, "\t");
        _builder.append("\"/>");
        _builder.newLineIfNotEmpty();
        {
          if ((value == "free")) {
            _builder.append("\t");
            _builder.append("<label kind=\"synchronisation\">");
            String _name_10 = statement.getDevice().getName();
            _builder.append(_name_10, "\t");
            _builder.append("_removeItemCmd!</label>");
            _builder.newLineIfNotEmpty();
          } else {
            _builder.append("\t");
            _builder.append("<label kind=\"synchronisation\">");
            String _name_11 = statement.getDevice().getName();
            _builder.append(_name_11, "\t");
            _builder.append("_set_free[currentSlot]!</label>");
            _builder.newLineIfNotEmpty();
          }
        }
        _builder.append("</transition>");
        _builder.newLine();
      }
    }
    {
      if ((value == "in_progress")) {
        _builder.append("<transition>");
        _builder.newLine();
        _builder.append("\t");
        _builder.append("<source ref=\"");
        StringConcatenation _builder_7 = new StringConcatenation();
        String _name_12 = statement.getDevice().getName();
        _builder_7.append(_name_12);
        _builder_7.append("_markSlot");
        _builder_7.append(value);
        _builder_7.append("_statement");
        int _indexOf_6 = UppaalGenerator.statementsIndexer.indexOf(statement);
        _builder_7.append(_indexOf_6);
        String _idOfLocation_6 = UppaalGenerator.getIdOfLocation(_builder_7.toString());
        _builder.append(_idOfLocation_6, "\t");
        _builder.append("\"/>");
        _builder.newLineIfNotEmpty();
        _builder.append("\t");
        _builder.append("<target ref=\"");
        StringConcatenation _builder_8 = new StringConcatenation();
        String _name_13 = statement.getDevice().getName();
        _builder_8.append(_name_13);
        _builder_8.append("_markSlotfull_");
        int _indexOf_7 = UppaalGenerator.statementsIndexer.indexOf(statement);
        _builder_8.append(_indexOf_7);
        String _idOfLocation_7 = UppaalGenerator.getIdOfLocation(_builder_8.toString());
        _builder.append(_idOfLocation_7, "\t");
        _builder.append("\"/>");
        _builder.newLineIfNotEmpty();
        _builder.append("\t");
        _builder.append("<label kind=\"synchronisation\">");
        String _name_14 = statement.getDevice().getName();
        _builder.append(_name_14, "\t");
        _builder.append("_addItemCmd!</label>");
        _builder.newLineIfNotEmpty();
        _builder.append("</transition>");
        _builder.newLine();
      }
    }
    final String trans = _builder.toString();
    StringConcatenation _builder_9 = new StringConcatenation();
    String _name_15 = statement.getDevice().getName();
    _builder_9.append(_name_15);
    _builder_9.append("_markSlot");
    _builder_9.append(value);
    _builder_9.append("_statement");
    int _indexOf_8 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_9.append(_indexOf_8);
    UppaalMasterGenerator.lastTransistionState = UppaalGenerator.getIdOfLocation(_builder_9.toString());
    if (((value == "free") || Objects.equal(value, "empty"))) {
      StringConcatenation _builder_10 = new StringConcatenation();
      String _name_16 = statement.getDevice().getName();
      _builder_10.append(_name_16);
      _builder_10.append("_markSlotopposite_");
      int _indexOf_9 = UppaalGenerator.statementsIndexer.indexOf(statement);
      _builder_10.append(_indexOf_9);
      UppaalMasterGenerator.lastTransistionState = UppaalGenerator.getIdOfLocation(_builder_10.toString());
    } else {
      boolean _equals = Objects.equal(value, "in_progress");
      if (_equals) {
        StringConcatenation _builder_11 = new StringConcatenation();
        String _name_17 = statement.getDevice().getName();
        _builder_11.append(_name_17);
        _builder_11.append("_markSlotfull_");
        int _indexOf_10 = UppaalGenerator.statementsIndexer.indexOf(statement);
        _builder_11.append(_indexOf_10);
        UppaalMasterGenerator.lastTransistionState = UppaalGenerator.getIdOfLocation(_builder_11.toString());
      }
    }
    return trans;
  }
  
  protected static String _generateLocation(final CameraScanOperation statement) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("<location id=\"");
    StringConcatenation _builder_1 = new StringConcatenation();
    String _name = statement.getDevice().getName();
    _builder_1.append(_name);
    _builder_1.append("_scanItem_");
    int _indexOf = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_1.append(_indexOf);
    String _idOfLocation = UppaalGenerator.getIdOfLocation(_builder_1.toString());
    _builder.append(_idOfLocation);
    _builder.append("\">");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<name>");
    String _name_1 = statement.getDevice().getName();
    _builder.append(_name_1, "\t");
    _builder.append("_scanItem_");
    int _indexOf_1 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder.append(_indexOf_1, "\t");
    _builder.append("</name>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<committed/>");
    _builder.newLine();
    _builder.append("</location>");
    _builder.newLine();
    _builder.append("<location id=\"");
    StringConcatenation _builder_2 = new StringConcatenation();
    String _name_2 = statement.getDevice().getName();
    _builder_2.append(_name_2);
    _builder_2.append("_itemColour_");
    int _indexOf_2 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_2.append(_indexOf_2);
    String _idOfLocation_1 = UppaalGenerator.getIdOfLocation(_builder_2.toString());
    _builder.append(_idOfLocation_1);
    _builder.append("\">");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<name>");
    String _name_3 = statement.getDevice().getName();
    _builder.append(_name_3, "\t");
    _builder.append("_itemColour_");
    int _indexOf_3 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder.append(_indexOf_3, "\t");
    _builder.append("</name>");
    _builder.newLineIfNotEmpty();
    _builder.append("</location>");
    _builder.newLine();
    return _builder.toString();
  }
  
  protected static String _generateTransistion(final CameraScanOperation statement) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("<transition>");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("<source ref=\"");
    _builder.append(UppaalMasterGenerator.lastTransistionState, "\t");
    _builder.append("\"/>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<target ref=\"");
    StringConcatenation _builder_1 = new StringConcatenation();
    String _name = statement.getDevice().getName();
    _builder_1.append(_name);
    _builder_1.append("_scanItem_");
    int _indexOf = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_1.append(_indexOf);
    String _idOfLocation = UppaalGenerator.getIdOfLocation(_builder_1.toString());
    _builder.append(_idOfLocation, "\t");
    _builder.append("\"/>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<label kind=\"synchronisation\">");
    String _name_1 = statement.getDevice().getName();
    _builder.append(_name_1, "\t");
    _builder.append("_getColour!</label>");
    _builder.newLineIfNotEmpty();
    _builder.append("</transition>");
    _builder.newLine();
    _builder.append("<transition>");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("<source ref=\"");
    StringConcatenation _builder_2 = new StringConcatenation();
    String _name_2 = statement.getDevice().getName();
    _builder_2.append(_name_2);
    _builder_2.append("_scanItem_");
    int _indexOf_1 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_2.append(_indexOf_1);
    String _idOfLocation_1 = UppaalGenerator.getIdOfLocation(_builder_2.toString());
    _builder.append(_idOfLocation_1, "\t");
    _builder.append("\"/>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<target ref=\"");
    StringConcatenation _builder_3 = new StringConcatenation();
    String _name_3 = statement.getDevice().getName();
    _builder_3.append(_name_3);
    _builder_3.append("_itemColour_");
    int _indexOf_2 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_3.append(_indexOf_2);
    String _idOfLocation_2 = UppaalGenerator.getIdOfLocation(_builder_3.toString());
    _builder.append(_idOfLocation_2, "\t");
    _builder.append("\"/>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<label kind=\"synchronisation\">");
    String _name_4 = statement.getDevice().getName();
    _builder.append(_name_4, "\t");
    _builder.append("_gottenColour?</label>");
    _builder.newLineIfNotEmpty();
    _builder.append("</transition>");
    _builder.newLine();
    final String trans = _builder.toString();
    StringConcatenation _builder_4 = new StringConcatenation();
    String _name_5 = statement.getDevice().getName();
    _builder_4.append(_name_5);
    _builder_4.append("_itemColour_");
    int _indexOf_3 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_4.append(_indexOf_3);
    UppaalMasterGenerator.lastTransistionState = UppaalGenerator.getIdOfLocation(_builder_4.toString());
    return trans;
  }
  
  protected static String _generateLocation(final ForEach statement) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("<location id=\"");
    StringConcatenation _builder_1 = new StringConcatenation();
    String _name = statement.getDevice().getName();
    _builder_1.append(_name);
    _builder_1.append("_get");
    EObject _value = statement.getVariableValue().getValue();
    DISK_SLOT_STATES _value_1 = ((DiskSlotStateValue) _value).getValue();
    _builder_1.append(_value_1);
    _builder_1.append("Slot_");
    int _indexOf = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_1.append(_indexOf);
    String _idOfLocation = UppaalGenerator.getIdOfLocation(_builder_1.toString());
    _builder.append(_idOfLocation);
    _builder.append("\">");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<name>");
    String _name_1 = statement.getDevice().getName();
    _builder.append(_name_1, "\t");
    _builder.append("_get");
    EObject _value_2 = statement.getVariableValue().getValue();
    DISK_SLOT_STATES _value_3 = ((DiskSlotStateValue) _value_2).getValue();
    _builder.append(_value_3, "\t");
    _builder.append("Slot_");
    int _indexOf_1 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder.append(_indexOf_1, "\t");
    _builder.append("</name>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<committed/>");
    _builder.newLine();
    _builder.append("</location>");
    _builder.newLine();
    _builder.append("<location id=\"");
    StringConcatenation _builder_2 = new StringConcatenation();
    String _name_2 = statement.getDevice().getName();
    _builder_2.append(_name_2);
    _builder_2.append("_gottenSlot");
    EObject _value_4 = statement.getVariableValue().getValue();
    DISK_SLOT_STATES _value_5 = ((DiskSlotStateValue) _value_4).getValue();
    _builder_2.append(_value_5);
    _builder_2.append("_");
    int _indexOf_2 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_2.append(_indexOf_2);
    String _idOfLocation_1 = UppaalGenerator.getIdOfLocation(_builder_2.toString());
    _builder.append(_idOfLocation_1);
    _builder.append("\">");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<name>");
    String _name_3 = statement.getDevice().getName();
    _builder.append(_name_3, "\t");
    _builder.append("_gottenSlot");
    EObject _value_6 = statement.getVariableValue().getValue();
    DISK_SLOT_STATES _value_7 = ((DiskSlotStateValue) _value_6).getValue();
    _builder.append(_value_7, "\t");
    _builder.append("_");
    int _indexOf_3 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder.append(_indexOf_3, "\t");
    _builder.append("</name>");
    _builder.newLineIfNotEmpty();
    _builder.append("</location>");
    _builder.newLine();
    {
      EList<Statement> _statements = statement.getStatements();
      for(final Statement s : _statements) {
        String _generateLocation = UppaalMasterGenerator.generateLocation(s);
        _builder.append(_generateLocation);
        _builder.newLineIfNotEmpty();
      }
    }
    return _builder.toString();
  }
  
  protected static String _generateTransistion(final ForEach statement) {
    final String returnTransistion = UppaalMasterGenerator.lastTransistionState;
    UppaalMasterGenerator.currentDisc = statement.getDevice().getName();
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("<transition>");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("<source ref=\"");
    _builder.append(UppaalMasterGenerator.lastTransistionState, "\t");
    _builder.append("\"/>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<target ref=\"");
    StringConcatenation _builder_1 = new StringConcatenation();
    String _name = statement.getDevice().getName();
    _builder_1.append(_name);
    _builder_1.append("_get");
    EObject _value = statement.getVariableValue().getValue();
    DISK_SLOT_STATES _value_1 = ((DiskSlotStateValue) _value).getValue();
    _builder_1.append(_value_1);
    _builder_1.append("Slot_");
    int _indexOf = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_1.append(_indexOf);
    String _idOfLocation = UppaalGenerator.getIdOfLocation(_builder_1.toString());
    _builder.append(_idOfLocation, "\t");
    _builder.append("\"/>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<label kind=\"synchronisation\">");
    String _name_1 = statement.getDevice().getName();
    _builder.append(_name_1, "\t");
    _builder.append("_get");
    EObject _value_2 = statement.getVariableValue().getValue();
    DISK_SLOT_STATES _value_3 = ((DiskSlotStateValue) _value_2).getValue();
    _builder.append(_value_3, "\t");
    _builder.append("Slot!</label>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<label kind=\"assignment\">GlobalTimer = 0</label>");
    _builder.newLine();
    _builder.append("</transition>");
    _builder.newLine();
    _builder.append("<transition>");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("<source ref=\"");
    StringConcatenation _builder_2 = new StringConcatenation();
    String _name_2 = statement.getDevice().getName();
    _builder_2.append(_name_2);
    _builder_2.append("_get");
    EObject _value_4 = statement.getVariableValue().getValue();
    DISK_SLOT_STATES _value_5 = ((DiskSlotStateValue) _value_4).getValue();
    _builder_2.append(_value_5);
    _builder_2.append("Slot_");
    int _indexOf_1 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_2.append(_indexOf_1);
    String _idOfLocation_1 = UppaalGenerator.getIdOfLocation(_builder_2.toString());
    _builder.append(_idOfLocation_1, "\t");
    _builder.append("\"/>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<target ref=\"");
    StringConcatenation _builder_3 = new StringConcatenation();
    String _name_3 = statement.getDevice().getName();
    _builder_3.append(_name_3);
    _builder_3.append("_gottenSlot");
    EObject _value_6 = statement.getVariableValue().getValue();
    DISK_SLOT_STATES _value_7 = ((DiskSlotStateValue) _value_6).getValue();
    _builder_3.append(_value_7);
    _builder_3.append("_");
    int _indexOf_2 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_3.append(_indexOf_2);
    String _idOfLocation_2 = UppaalGenerator.getIdOfLocation(_builder_3.toString());
    _builder.append(_idOfLocation_2, "\t");
    _builder.append("\"/>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<label kind=\"synchronisation\">");
    String _name_4 = statement.getDevice().getName();
    _builder.append(_name_4, "\t");
    _builder.append("_found");
    EObject _value_8 = statement.getVariableValue().getValue();
    DISK_SLOT_STATES _value_9 = ((DiskSlotStateValue) _value_8).getValue();
    _builder.append(_value_9, "\t");
    _builder.append("Slot?</label>");
    _builder.newLineIfNotEmpty();
    _builder.append("</transition>");
    _builder.newLine();
    StringConcatenation _builder_4 = new StringConcatenation();
    StringConcatenation _builder_5 = new StringConcatenation();
    String _name_5 = statement.getDevice().getName();
    _builder_5.append(_name_5);
    _builder_5.append("_gottenSlot");
    EObject _value_10 = statement.getVariableValue().getValue();
    DISK_SLOT_STATES _value_11 = ((DiskSlotStateValue) _value_10).getValue();
    _builder_5.append(_value_11);
    _builder_5.append("_");
    int _indexOf_3 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_5.append(_indexOf_3);
    String _idOfLocation_3 = UppaalGenerator.getIdOfLocation(_builder_5.toString());
    _builder_4.append(_idOfLocation_3);
    String _updateLastTrans = UppaalMasterGenerator.updateLastTrans(_builder_4.toString());
    _builder.append(_updateLastTrans);
    _builder.newLineIfNotEmpty();
    {
      EList<Statement> _statements = statement.getStatements();
      for(final Statement s : _statements) {
        String _generateTransistion = UppaalMasterGenerator.generateTransistion(s);
        _builder.append(_generateTransistion);
        _builder.newLineIfNotEmpty();
      }
    }
    _builder.append("<transition>");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("<source ref=\"");
    _builder.append(UppaalMasterGenerator.lastTransistionState, "\t");
    _builder.append("\"/>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<target ref=\"");
    _builder.append(returnTransistion, "\t");
    _builder.append("\"/>");
    _builder.newLineIfNotEmpty();
    _builder.append("</transition>");
    _builder.newLine();
    _builder.append("<transition>");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("<source ref=\"");
    StringConcatenation _builder_6 = new StringConcatenation();
    String _name_6 = statement.getDevice().getName();
    _builder_6.append(_name_6);
    _builder_6.append("_get");
    EObject _value_12 = statement.getVariableValue().getValue();
    DISK_SLOT_STATES _value_13 = ((DiskSlotStateValue) _value_12).getValue();
    _builder_6.append(_value_13);
    _builder_6.append("Slot_");
    int _indexOf_4 = UppaalGenerator.statementsIndexer.indexOf(statement);
    _builder_6.append(_indexOf_4);
    String _idOfLocation_4 = UppaalGenerator.getIdOfLocation(_builder_6.toString());
    _builder.append(_idOfLocation_4, "\t");
    _builder.append("\"/>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<target ref=\"");
    _builder.append(returnTransistion, "\t");
    _builder.append("\"/>");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("<label kind=\"guard\">GlobalTimer &gt; 2</label>");
    _builder.newLine();
    _builder.append("</transition>");
    _builder.newLine();
    final String trans = _builder.toString();
    UppaalMasterGenerator.lastTransistionState = returnTransistion;
    return trans;
  }
  
  public static String updateLastTrans(final String newValue) {
    UppaalMasterGenerator.lastTransistionState = newValue;
    return "";
  }
  
  public static String generateLocation(final Statement statement) {
    if (statement instanceof CameraScanOperation) {
      return _generateLocation((CameraScanOperation)statement);
    } else if (statement instanceof CraneDropOperation) {
      return _generateLocation((CraneDropOperation)statement);
    } else if (statement instanceof CranePickupOperation) {
      return _generateLocation((CranePickupOperation)statement);
    } else if (statement instanceof DiskMarkSlotOperation) {
      return _generateLocation((DiskMarkSlotOperation)statement);
    } else if (statement instanceof DiskMoveEmptySlotOperation) {
      return _generateLocation((DiskMoveEmptySlotOperation)statement);
    } else if (statement instanceof DiskMoveSlotOperation) {
      return _generateLocation((DiskMoveSlotOperation)statement);
    } else if (statement instanceof DiskMoveVariableSlotOperation) {
      return _generateLocation((DiskMoveVariableSlotOperation)statement);
    } else if (statement instanceof DiskWaitOperation) {
      return _generateLocation((DiskWaitOperation)statement);
    } else if (statement instanceof DeviceConditional) {
      return _generateLocation((DeviceConditional)statement);
    } else if (statement instanceof ForEach) {
      return _generateLocation((ForEach)statement);
    } else if (statement instanceof VariableConditional) {
      return _generateLocation((VariableConditional)statement);
    } else {
      throw new IllegalArgumentException("Unhandled parameter types: " +
        Arrays.<Object>asList(statement).toString());
    }
  }
  
  public static String generateTransistion(final Statement statement) {
    if (statement instanceof CameraScanOperation) {
      return _generateTransistion((CameraScanOperation)statement);
    } else if (statement instanceof CraneDropOperation) {
      return _generateTransistion((CraneDropOperation)statement);
    } else if (statement instanceof CranePickupOperation) {
      return _generateTransistion((CranePickupOperation)statement);
    } else if (statement instanceof DiskMarkSlotOperation) {
      return _generateTransistion((DiskMarkSlotOperation)statement);
    } else if (statement instanceof DiskMoveEmptySlotOperation) {
      return _generateTransistion((DiskMoveEmptySlotOperation)statement);
    } else if (statement instanceof DiskMoveSlotOperation) {
      return _generateTransistion((DiskMoveSlotOperation)statement);
    } else if (statement instanceof DiskMoveVariableSlotOperation) {
      return _generateTransistion((DiskMoveVariableSlotOperation)statement);
    } else if (statement instanceof DiskWaitOperation) {
      return _generateTransistion((DiskWaitOperation)statement);
    } else if (statement instanceof DeviceConditional) {
      return _generateTransistion((DeviceConditional)statement);
    } else if (statement instanceof ForEach) {
      return _generateTransistion((ForEach)statement);
    } else if (statement instanceof VariableConditional) {
      return _generateTransistion((VariableConditional)statement);
    } else {
      throw new IllegalArgumentException("Unhandled parameter types: " +
        Arrays.<Object>asList(statement).toString());
    }
  }
}
